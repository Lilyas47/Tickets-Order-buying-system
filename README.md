# HW-4

Проект запускается с помощью docker compose

### Cервис авторизации пользователей

Находится на порту 8080. 

Взаимодействует с БД postgres-auth-db, которая лежит на порту 5433.

Функционал:

1. Регистрация нового пользователя
2. Аутентификация пользователя по электронной почте и паролю, возвращает JWT токен
3. Получение информации об аутентифицированном пользователе по JWT-токену, указанному в заголовке запроса 
(на странице Swagger UI токен нужно вставлять в окно в правом верхнем углу)
4. Поддержка Springdoc (Swagger UI по адресу http://localhost:8080/swagger-ui/index.html#/ )
5. Миграция БД с помощью Flyway
6. Полная спецификация микросервиса



### Cервис продажи билетов

Находится на порту 9090.
Взаимодействует с БД postgres-order-db, которая лежит на порту 5434.

Обладает следующими функциями:

1. Создание заказа для аутентифицированных пользователей с использованием JWT-токена
(на странице Swagger UI токен нужно вставлять в окнo в правом верхнем углу)
2. Получение данных о заказе по его ID
3. Обновление статуса созданного заказа в отдельном потоке
4. Добавление новых станций
5. Интерфейс Springdoc (Swagger UI по адресу http://localhost:9090/swagger-ui/index.html#/ )
6. Миграция БД с помощью Flyway
7. Полная спецификация микросервиса


### Общая архитектура

1. Всего есть 2 сервиса - сервис авторизации пользователей (User App) и сервис заказов на покупку билетов (Order App)
2. У каждого сервиса есть собственный контейнер с БД (Postgres)
3. При регистрации пользователя User App сохраняет данные о пользователе в БД
4. При авторизации пользователе User App сохраняет данные о сессии в БД
5. При создании новой станции Order App сохраняет данные о станции в БД
6. При создании нового заказа Order App посылает запрос User App для получения информации о пользователе, 
и в итоге сохраняет данные о созданном заказе в БД


### Список использованных технологий:
- spring-boot-starter-parent (version: 3.2.5)
- spring-boot-starter-data-jpa - для работы с БД
- spring-boot-starter-security - для аутентификации пользователя
- spring-boot-starter-web
- flyway-core - для миграции БД
- postgresql (scope: runtime) - для работы с БД
- springdoc-openapi-starter-webmvc-ui (version: 2.3.0) - для интерфейса и генерации документации
- jjwt (version: 0.9.1) - для создания JWT токена
- spring-boot-starter-validation - для валидации входных данных
- okhttp - для передачи Http-запросов
- gson - для десериализации полученных JSON-ов

^_^